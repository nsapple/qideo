<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #000;
            overflow: hidden;
        }
        #player-container {
            position: fixed;
            inset: 0;
            width: 100vw;
            height: 100vh;
        }
        #player {
            width: 100%;
            height: 100%;
            border: none;
        }
        #click-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            color: #fff;
            font-family: sans-serif;
            font-size: 24px;
            text-align: center;
        }
        #click-overlay.hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div id="player-container">
        <div id="player"></div>
    </div>
    <div id="click-overlay">Click anywhere to play fullscreen</div>
    
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // Get URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const videoUrl = urlParams.get('url');
        
        if (!videoUrl) {
            document.body.innerHTML = '<div style="color: #fff; padding: 20px; font-family: sans-serif;">Missing URL parameter. Use: ?url=YOUTUBE_URL</div>';
        } else {
            // Extract video ID from various YouTube URL formats
            let videoId = null;
            
            if (videoUrl.includes('youtube.com/watch?v=')) {
                videoId = new URL(videoUrl).searchParams.get('v');
            } else if (videoUrl.includes('youtu.be/')) {
                videoId = videoUrl.split('youtu.be/')[1].split('?')[0];
            } else if (videoUrl.includes('youtube.com/embed/')) {
                videoId = videoUrl.split('embed/')[1].split('?')[0];
            }
            
            if (!videoId) {
                document.body.innerHTML = '<div style="color: #fff; padding: 20px; font-family: sans-serif;">Invalid YouTube URL</div>';
            } else {
                let player;
                
                // YouTube IFrame API callback
                window.onYouTubeIframeAPIReady = function() {
                    player = new YT.Player('player', {
                        width: '100%',
                        height: '100%',
                        videoId: videoId,
                        playerVars: {
                            autoplay: 1,
                            mute: 1,
                            playsinline: 1,
                            rel: 0,
                            controls: 1,
                            fs: 1
                        },
                        events: {
                            onReady: function(event) {
                                event.target.mute();
                                event.target.playVideo();
                            }
                        }
                    });
                };
                
                // Click to go fullscreen and unmute
                const overlay = document.getElementById('click-overlay');
                const container = document.getElementById('player-container');
                
                async function goFullscreen() {
                    overlay.classList.add('hidden');
                    
                    // Unmute
                    if (player && player.unMute) {
                        player.unMute();
                    }
                    
                    // Request fullscreen on the container
                    try {
                        if (container.requestFullscreen) {
                            await container.requestFullscreen();
                        } else if (container.webkitRequestFullscreen) {
                            await container.webkitRequestFullscreen();
                        } else if (container.mozRequestFullScreen) {
                            await container.mozRequestFullScreen();
                        } else if (container.msRequestFullscreen) {
                            await container.msRequestFullscreen();
                        }
                    } catch (err) {
                        console.log('Fullscreen not available:', err);
                    }
                }
                
                overlay.addEventListener('click', goFullscreen);
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        goFullscreen();
                    }
                });
            }
        }
    </script>
</body>
</html>
